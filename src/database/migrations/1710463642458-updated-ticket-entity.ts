import { MigrationInterface, QueryRunner } from "typeorm";

export class UpdatedTicketEntity1710463642458 implements MigrationInterface {
    name = 'UpdatedTicketEntity1710463642458'

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "ticket" ADD "contract_has_cancellation_more_description" character varying`);
        await queryRunner.query(`ALTER TYPE "public"."ticket_state_enum" RENAME TO "ticket_state_enum_old"`);
        await queryRunner.query(`CREATE TYPE "public"."ticket_state_enum" AS ENUM('NONE', 'CLOSED', 'FIRST_TICKET', 'SELECT_TICKET', 'WAITING_OWNER_TYPE', 'WAITING_COUNTERPART_NAME', 'WAITING_COUNTERPART_NAME_CONFIRMATION', 'WAITING_COUNTERPART_TAXPAYER_NUMBER', 'WAITING_COUNTERPART_TAXPAYER_NUMBER_CONFIRMATION', 'WAITING_COUNTERPART_PHONE_NUMBER', 'WAITING_COUNTERPART_PHONE_NUMBER_CONFIRMATION', 'WAITING_COUNTERPART_EMAIL', 'WAITING_COUNTERPART_EMAIL_CONFIRMATION', 'WAITING_COUNTERPART_ADDRESS', 'WAITING_COUNTERPART_ADDRESS_CONFIRMATION', 'WAITING_SERVICE_CATEGORY', 'WAITING_SERVICE_ADDRESS', 'WAITING_SERVICE_ADDRESS_CONFIRMATION', 'WAITING_SERVICE_DETAILS', 'WAITING_SERVICE_DETAILS_CONFIRMATION', 'WAITING_SERVICE_START_DATE', 'WAITING_SERVICE_START_DATE_CONFIRMATION', 'WAITING_SERVICE_END_DATE', 'WAITING_SERVICE_END_DATE_CONFIRMATION', 'WAITING_SERVICE_PAYMENT_AMOUNT', 'WAITING_SERVICE_PAYMENT_AMOUNT_CONFIRMATION', 'WAITING_SERVICE_PAYMENT_DATES', 'WAITING_SERVICE_PAYMENT_DATES_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_DATE', 'WAITING_SERVICE_MATERIAL_DATE_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_HOW_BUY', 'WAITING_SERVICE_MATERIAL_HOW_BUY_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_HOW_MUCH_BUDGETS', 'WAITING_SERVICE_MATERIAL_HOW_MUCH_BUDGETS_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_WHERE', 'WAITING_SERVICE_MATERIAL_WHERE_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_PAYBACK', 'WAITING_SERVICE_MATERIAL_PAYBACK_CONFIRMATION', 'WAITING_SERVICE_CONTRACT_CANCEL', 'WAITING_SERVICE_CONTRACT_CANCEL_CONFIRMATION', 'WAITING_SERVICE_CONTRACT_CANCEL_DETAILS', 'WAITING_SERVICE_CONTRACT_CANCEL_DETAILS_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_HOW_MUCH', 'WAITING_SERVICE_MATERIAL_HOW_MUCH_CONFIRMATION', 'WAITING_SERVICE_STEPS', 'WAITING_SERVICE_STEPS_DESCRIPTION', 'WAITING_SERVICE_HOURS', 'WAITING_SERVICE_HOURS_DESCRIPTION', 'WAITING_SERVICE_PAYMENT_METHOD', 'WAITING_SERVICE_PAYMENT_IN_INSTALLMENTS_METHOD', 'WAITING_SERVICE_PAYMENT_IN_CASH_METHOD', 'WAITING_SERVICE_PAYMENT_OTHERS_METHOD', 'WAITING_SERVICE_PAYMENT_OTHER_METHOD_CONFIRMATION', 'WAITING_PAYMENT_INSTALLMENT_COUNT', 'WAITING_PAYMENT_INSTALLMENT_COUNT_CONFIRMATION', 'WAITING_PAYMENT_IN_INSTALLMENT_OTHER_METHOD_CONFIRMATION', 'WAITING_PAYMENT_IN_INSTALLMENT_OTHER_METHOD', 'WAITING_PAYMENT_IN_CASH_OTHER_METHOD', 'WAITING_PAYMENT_IN_CASH_OTHER_METHOD_CONFIRMATION', 'WAITING_MATERIAL_IS_PART_OF_CONTRACT', 'WAITING_SERVICE_MATERIAL_WHO_BUY', 'WAITING_SERVICE_MATERIAL_PRE_DETERMINED_VALUE_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_PRE_DETERMINED_VALUE', 'WAITING_SERVICE_MATERIAL_HOW_PAY', 'WAITING_SERVICE_MATERIAL_DETAILS', 'WAITING_SERVICE_MATERIAL_DETAILS_DESCRIPTION', 'WAITING_SERVICE_MATERIAL_DETAILS_CONFIRMATION', 'WAITING_SERVICE_CONTRACT_HAS_MORE', 'WAITING_SERVICE_CONTRACT_HAS_MORE_DESCRIPTION', 'WAITING_SERVICE_CONTRACT_HAS_MORE_DESCRIPTION_CONFIRMATION ', 'WAITING_SERVICE_CONTRACT_HAS_DEADLINE_MORE', 'WAITING_SERVICE_CONTRACT_HAS_DEADLINE_MORE_DESCRIPTION', 'WAITING_CONTRACT_HAS_DEADLINE_MORE_DESCRIPTION_CONFIRMATION', 'WAITING_SERVICE_DELIVERY', 'WAITING_SERVICE_DELIVERY_CONFIRMATION', 'WAITING_SERVICE_CONTRACT_HAS_CANCELLATION_MORE', 'WAITING_SERVICE_CONTRACT_HAS_CANCELLATION_MORE_DESCRIPTION', 'WAITING_CONTRACT_HAS_CANCELLATION_MORE_DESCRIPTION_CONFIRMATION')`);
        await queryRunner.query(`ALTER TABLE "ticket" ALTER COLUMN "state" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "ticket" ALTER COLUMN "state" TYPE "public"."ticket_state_enum" USING "state"::"text"::"public"."ticket_state_enum"`);
        await queryRunner.query(`ALTER TABLE "ticket" ALTER COLUMN "state" SET DEFAULT 'NONE'`);
        await queryRunner.query(`DROP TYPE "public"."ticket_state_enum_old"`);
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`CREATE TYPE "public"."ticket_state_enum_old" AS ENUM('NONE', 'CLOSED', 'FIRST_TICKET', 'SELECT_TICKET', 'WAITING_OWNER_TYPE', 'WAITING_COUNTERPART_NAME', 'WAITING_COUNTERPART_NAME_CONFIRMATION', 'WAITING_COUNTERPART_TAXPAYER_NUMBER', 'WAITING_COUNTERPART_TAXPAYER_NUMBER_CONFIRMATION', 'WAITING_COUNTERPART_PHONE_NUMBER', 'WAITING_COUNTERPART_PHONE_NUMBER_CONFIRMATION', 'WAITING_COUNTERPART_EMAIL', 'WAITING_COUNTERPART_EMAIL_CONFIRMATION', 'WAITING_COUNTERPART_ADDRESS', 'WAITING_COUNTERPART_ADDRESS_CONFIRMATION', 'WAITING_SERVICE_CATEGORY', 'WAITING_SERVICE_ADDRESS', 'WAITING_SERVICE_ADDRESS_CONFIRMATION', 'WAITING_SERVICE_DETAILS', 'WAITING_SERVICE_DETAILS_CONFIRMATION', 'WAITING_SERVICE_START_DATE', 'WAITING_SERVICE_START_DATE_CONFIRMATION', 'WAITING_SERVICE_END_DATE', 'WAITING_SERVICE_END_DATE_CONFIRMATION', 'WAITING_SERVICE_PAYMENT_AMOUNT', 'WAITING_SERVICE_PAYMENT_AMOUNT_CONFIRMATION', 'WAITING_SERVICE_PAYMENT_DATES', 'WAITING_SERVICE_PAYMENT_DATES_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_DATE', 'WAITING_SERVICE_MATERIAL_DATE_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_HOW_BUY', 'WAITING_SERVICE_MATERIAL_HOW_BUY_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_HOW_MUCH_BUDGETS', 'WAITING_SERVICE_MATERIAL_HOW_MUCH_BUDGETS_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_WHERE', 'WAITING_SERVICE_MATERIAL_WHERE_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_PAYBACK', 'WAITING_SERVICE_MATERIAL_PAYBACK_CONFIRMATION', 'WAITING_SERVICE_CONTRACT_CANCEL', 'WAITING_SERVICE_CONTRACT_CANCEL_CONFIRMATION', 'WAITING_SERVICE_CONTRACT_CANCEL_DETAILS', 'WAITING_SERVICE_CONTRACT_CANCEL_DETAILS_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_HOW_MUCH', 'WAITING_SERVICE_MATERIAL_HOW_MUCH_CONFIRMATION', 'WAITING_SERVICE_STEPS', 'WAITING_SERVICE_STEPS_DESCRIPTION', 'WAITING_SERVICE_HOURS', 'WAITING_SERVICE_HOURS_DESCRIPTION', 'WAITING_SERVICE_PAYMENT_METHOD', 'WAITING_SERVICE_PAYMENT_IN_INSTALLMENTS_METHOD', 'WAITING_SERVICE_PAYMENT_IN_CASH_METHOD', 'WAITING_SERVICE_PAYMENT_OTHERS_METHOD', 'WAITING_SERVICE_PAYMENT_OTHER_METHOD_CONFIRMATION', 'WAITING_PAYMENT_INSTALLMENT_COUNT', 'WAITING_PAYMENT_INSTALLMENT_COUNT_CONFIRMATION', 'WAITING_PAYMENT_IN_INSTALLMENT_OTHER_METHOD_CONFIRMATION', 'WAITING_PAYMENT_IN_INSTALLMENT_OTHER_METHOD', 'WAITING_PAYMENT_IN_CASH_OTHER_METHOD', 'WAITING_PAYMENT_IN_CASH_OTHER_METHOD_CONFIRMATION', 'WAITING_MATERIAL_IS_PART_OF_CONTRACT', 'WAITING_SERVICE_MATERIAL_WHO_BUY', 'WAITING_SERVICE_MATERIAL_PRE_DETERMINED_VALUE_CONFIRMATION', 'WAITING_SERVICE_MATERIAL_PRE_DETERMINED_VALUE', 'WAITING_SERVICE_MATERIAL_HOW_PAY', 'WAITING_SERVICE_MATERIAL_DETAILS', 'WAITING_SERVICE_MATERIAL_DETAILS_DESCRIPTION', 'WAITING_SERVICE_MATERIAL_DETAILS_CONFIRMATION', 'WAITING_SERVICE_CONTRACT_HAS_MORE', 'WAITING_SERVICE_CONTRACT_HAS_MORE_DESCRIPTION', 'WAITING_SERVICE_CONTRACT_HAS_MORE_DESCRIPTION_CONFIRMATION ', 'WAITING_SERVICE_CONTRACT_HAS_DEADLINE_MORE', 'WAITING_SERVICE_CONTRACT_HAS_DEADLINE_MORE_DESCRIPTION', 'WAITING_CONTRACT_HAS_DEADLINE_MORE_DESCRIPTION_CONFIRMATION', 'WAITING_SERVICE_DELIVERY', 'WAITING_SERVICE_DELIVERY_CONFIRMATION')`);
        await queryRunner.query(`ALTER TABLE "ticket" ALTER COLUMN "state" DROP DEFAULT`);
        await queryRunner.query(`ALTER TABLE "ticket" ALTER COLUMN "state" TYPE "public"."ticket_state_enum_old" USING "state"::"text"::"public"."ticket_state_enum_old"`);
        await queryRunner.query(`ALTER TABLE "ticket" ALTER COLUMN "state" SET DEFAULT 'NONE'`);
        await queryRunner.query(`DROP TYPE "public"."ticket_state_enum"`);
        await queryRunner.query(`ALTER TYPE "public"."ticket_state_enum_old" RENAME TO "ticket_state_enum"`);
        await queryRunner.query(`ALTER TABLE "ticket" DROP COLUMN "contract_has_cancellation_more_description"`);
    }

}
